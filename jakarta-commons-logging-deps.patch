--- commons-logging-1.1-src/build.xml.orig	2006-05-09 23:45:08.000000000 +0200
+++ commons-logging-1.1-src/build.xml	2007-09-19 17:56:02.000000000 +0200
@@ -72,11 +72,11 @@
 
   <!-- The locations of necessary jar files -->
   <property name="junit.jar"               value="junit-3.8.1.jar"/>
-  <property name="log4j12.jar"             value="log4j-1.2.12.jar"/>
+  <property name="log4j.jar"             value="log4j-1.2.14.jar"/>
   <property name="log4j13.jar"             value="log4j-1.3.0.jar"/>
   <property name="logkit.jar"              value="logkit-1.0.1.jar"/>
-  <property name="avalon-framework.jar"    value="avalon-framework-4.1.3.jar"/>
-  <property name="servletapi.jar"          value="servletapi-2.3.jar"/>
+  <property name="avalon-framework.jar"    value="avalon-framework-4.3.jar"/>
+  <property name="servletapi.jar"          value="servletapi-4.jar"/>
 
 
 <!-- ========== Component Declarations ==================================== -->
@@ -179,17 +179,17 @@
   </path>
 
   <!-- Construct unit test classpath (Log4J tests) -->
-  <path id="test.classpath.log4j12">
+  <path id="test.classpath.log4j">
     <pathelement location="${build.home}/classes"/>
     <pathelement location="${build.home}/tests"/>
     <pathelement location="${junit.jar}"/>
-    <pathelement location="${log4j12.jar}"/>
+    <pathelement location="${log4j.jar}"/>
   </path>
 
   <!-- Construct javadoc classpath -->
   <path id="javadoc.classpath">
     <path refid="compile.classpath"/>
-    <pathelement location="${log4j12.jar}"/>
+    <pathelement location="${log4j.jar}"/>
   </path>
 
   <!-- Should all tests fail if one does? -->
@@ -200,7 +200,7 @@
 
   <!-- libs to pass to the tests -->
   <property name="test.sysprops.testclasses" value="${build.home}/tests"/>
-  <property name="test.sysprops.log4j12" value="${log4j12.jar}"/>
+  <property name="test.sysprops.log4j" value="${log4j.jar}"/>
   <property name="test.sysprops.log4j13" value="${log4j13.jar}"/>
   <property name="test.sysprops.logkit" value="${logkit.jar}"/>
   <property name="test.sysprops.servletapi" value="${servletapi.jar}"/>
@@ -224,8 +224,8 @@
     <get dest="lib/junit-3.8.1.jar" src="${getlibs.base}/junit/jars/junit-3.8.1.jar"/>
     <get dest="lib/logkit-1.0.1.jar" src="${getlibs.base}/logkit/jars/logkit-1.0.1.jar"/>
     <get dest="lib/avalon-framework-4.1.3.jar" src="${getlibs.base}/avalon-framework/jars/avalon-framework-4.1.3.jar"/>
-    <get dest="lib/log4j-1.2.12.jar" src="${getlibs.base}/log4j/jars/log4j-1.2.12.jar"/>
-    <get dest="lib/servletapi-2.3.jar" src="${getlibs.base}/servletapi/jars/servletapi-2.3.jar"/>
+    <get dest="lib/log4j-1.2.14.jar" src="${getlibs.base}/log4j/jars/log4j-1.2.14.jar"/>
+    <get dest="lib/servletapi-4.jar" src="${getlibs.base}/servletapi/jars/servletapi-4.jar"/>
   </target>
 
   <target name="init"
@@ -240,7 +240,7 @@
    description="Prepare build directory">
 
     <echo>
-    Log4j12: ${log4j12.jar}
+    Log4j: ${log4j.jar}
     <!-- Note: log4j13 support is not available in the 1.1 release. -->
     <!--Log4j13: ${log4j13.jar}-->
     LogKit: ${logkit.jar}
@@ -278,12 +278,12 @@
                classpathref="compile.classpath"
                classname="org.apache.avalon.framework.logger.Logger"/>
 
-    <available file="${log4j12.jar}" property="log4j12.present"/>
+    <available file="${log4j.jar}" property="log4j.present"/>
     <available file="${log4j13.jar}" property="log4j13.present"/>
     <available file="${build.home}/docs" property="maven.generated.docs.present"/>
   </target>
 
-  <target name="log4j12-warning" unless='log4j12.present' depends='init,discovery'>
+  <target name="log4j-warning" unless='log4j.present' depends='init,discovery'>
     <echo>
     *** WARNING ***
     Log4j 1.2 not found: Cannot Build Log4JLogger
@@ -324,7 +324,7 @@
     </echo>
   </target>
   
-  <target name="log4j12-test-warning" unless='log4j12.jar' depends='init,discovery'>
+  <target name="log4j-test-warning" unless='log4j.jar' depends='init,discovery'>
     <echo>
     *** WARNING ***
     Log4J 1.2.x Jar not found: Cannot execute 1.2.x tests
@@ -332,14 +332,14 @@
   </target>
     
   <target name='warning' 
-    depends='log4j12-warning,log4j13-warning,logkit-warning,jdk1.4-warning,avalon-framework-warning,compile-1.4'/>
+    depends='log4j-warning,log4j13-warning,logkit-warning,jdk1.4-warning,avalon-framework-warning,compile-1.4'/>
 
   <target name="compile-only" 
-    depends="prepare,discovery,warning,show-lib-presence,compile-non-log4j,compile-log4j12,compile-log4j13,build-jar"/>
+    depends="prepare,discovery,warning,show-lib-presence,compile-non-log4j,compile-log4j,compile-log4j13,build-jar"/>
 
   <target name="show-lib-presence">
     <echo  message="jdk.1.4.present=${jdk.1.4.present}"/>
-    <echo  message="log4j12.present=${log4j12.present}"/>
+    <echo  message="log4j.present=${log4j.present}"/>
     <!-- Note: log4j13 support is not available in the 1.1 release. -->
     <!--<echo  message="log4j13.present=${log4j13.present}"/>-->
     <echo  message="logkit.present=${logkit.present}"/>
@@ -403,7 +403,7 @@
     </javac>
   </target>
 
-  <target name="compile-log4j12" depends="prepare,discovery">
+  <target name="compile-log4j" depends="prepare,discovery">
     <!-- compile the log4j1.2 support classes -->
     <javac srcdir="${source.home}"
            destdir="${build.home}/classes"
@@ -419,11 +419,11 @@
         <pathelement refid="compile.classpath"/>
         <classpath refid="compile.classpath"/>
         -->
-        <pathelement location="${log4j12.jar}"/> 
+        <pathelement location="${log4j.jar}"/> 
       </classpath>
 
       <include name="org/apache/commons/logging/impl/Log4JLogger.java"
-               if="log4j12.present"/>
+               if="log4j.present"/>
     </javac>
   </target>
 
@@ -507,13 +507,13 @@
     </javac>
   </target>
 
-  <target name='compile.log4j.tests' if='log4j12.present'>
+  <target name='compile.log4j.tests' if='log4j.present'>
     <javac  srcdir="${test.home}"
            destdir="${build.home}/tests"
              debug="${compile.debug}"
        deprecation="${compile.deprecation}"
           optimize="${compile.optimize}">
-      <classpath refid="test.classpath.log4j12"/>
+      <classpath refid="test.classpath.log4j"/>
         <include name='**/log4j/**'/>
         <!-- NOTE -->
         <!--
@@ -581,9 +581,9 @@
          basedir="${build.home}/tests"
         manifest="${build.home}/conf/MANIFEST.MF">
       <include name="org/apache/commons/logging/log4j/CustomConfig.properties"
-                 if="log4j12.present"/>
+                 if="log4j.present"/>
       <include name="org/apache/commons/logging/log4j/TestAppender.class"
-                 if="log4j12.present"/>
+                 if="log4j.present"/>
     </jar>
     <jar jarfile="${build.home}/commons-${component.name}-tests.jar"
          basedir="${build.home}/tests"
@@ -719,7 +719,7 @@
     -   ant -Dtestmatch=**/FooTestCase testall
     -->
 
-  <target name="test" depends="log4j12-test-warning, compile.tests"
+  <target name="test" depends="log4j-test-warning, compile.tests"
    description="Run all unit tests">
     <echo message="Test output can be found in directory ${build.home}/test-reports."/>
     <delete dir="${build.home}/test-reports"/>
